{
    "accounts": {
        "bsonType": "object",
        "required": ["email", "passwordHash", "tier", "currentSchedule"],
        "additionalProperties": false,
        "properties": {
            "_id": {
                "bsonType": "objectId"
            },
            "email": {
                "bsonType": "string",
                "maxLength": 320,
                "minLength": 1
            },
            "passwordHash": {
                "bsonType": "string",
                "maxLength": 32,
                "minLength": 32
            },
            "tier": {
                "bsonType": "string",
                "maxLength": 32,
                "minLength": 1
            },
            "currentSchedule": {
                "bsonType": ["objectId", "null"]
            }
        }
    },
    "pendingAccounts": {
        "bsonType": "object",
        "required": ["dateCreated", "email", "passwordHash"],
        "additionalProperties": false,
        "properties": {
            "_id": {
                "bsonType": "objectId"
            },
            "dateCreated": {
                "bsonType": "date"
            },
            "email": {
                "bsonType": "string",
                "maxLength": 320,
                "minLength": 1
            },
            "passwordHash": {
                "bsonType": "string",
                "maxLength": 32,
                "minLength": 32
            }
        }
    },
    "onlineAccounts": {
        "bsonType": "object",
        "required": ["userId", "dateCreated"],
        "additionalProperties": false,
        "properties": {
            "_id": {
                "bsonType": "objectId"
            },
            "userId": {
                "bsonType": "objectId"
            },
            "dateCreated": {
                "bsonType": "date"
            }
        }
    },
    "schedules": {
        "bsonType": "object",
        "required": ["userId", "name"],
        "additionalProperties": false,
        "properties": {
            "_id": {
                "bsonType": "objectId"
            },
            "userId": {
                "bsonType": "objectId"
            },
            "name": {
                "bsonType": "string",
                "maxLength": 32,
                "minLength": 1
            }
        }
    },
    "categories": {
        "bsonType": "object",
        "required": ["userId", "scheduleId", "categories"],
        "additionalProperties": false,
        "properties": {
            "_id": {
                "bsonType": "objectId"
            },
            "userId": {
                "bsonType": "objectId"
            },
            "scheduleId": {
                "bsonType": "objectId"
            },
            "categories": {
                "bsonType": "object",
                "maxProperties": 20
            }
        }
    },
    "people": {
        "bsonType": "object",
        "required": ["userId", "scheduleId", "name", "categories"],
        "additionalProperties": false,
        "properties": {
            "_id": {
                "bsonType": "objectId"
            },
            "userId": {
                "bsonType": "objectId"
            },
            "scheduleId": {
                "bsonType": "objectId"
            },
            "name": {
                "bsonType": "string",
                "maxLength": 32,
                "minLength": 1
            },
            "categories": {
                "bsonType": "object",
                "maxProperties": 20
            }
        }
    },
    "avalabilities": {
        "bsonType": "object",
        "required": ["userId", "scheduleId", "personId", "availabilities"],
        "additionalProperties": false,
        "properties": {
            "_id": {
                "bsonType": "objectId"
            },
            "userId": {
                "bsonType": "objectId"
            },
            "scheduleId": {
                "bsonType": "objectId"
            },
            "personId": {
                "bsonType": "objectId"
            },
            "avalabilities": {
                "bsonType": "array",
                "maxItems": 100,
                "uniqueItems": true,
                "items": {
                    "bsonType": "object",
                    "required": ["start", "end", "rrule"],
                    "additionalProperties": false,
                    "properties": {
                        "start": {
                            "bsonType": "date"
                        },
                        "end": {
                            "bsonType": "date"
                        },
                        "rrule": {
                            "bsonType": ["string", "null"],
                            "maxLength": 256
                        }
                    }
                }
            }
        }
    },
    "pendingEvents": {
        "bsonType": "object",
        "required": ["userId", "scheduleId", "pendingEvents"],
        "additionalProperties": false,
        "properties": {
            "_id": {
                "bsonType": "objectId"
            },
            "userId": {
                "bsonType": "objectId"
            },
            "scheduleId": {
                "bsonType": "objectId"
            },
            "pendingEvents": {
                "bsonType": "array",
                "maxItems": 256,
                "items": {
                    "bsonType": "object",
                    "required": ["start", "end", "name", "category", "rrule"],
                    "additionalProperties": false,
                    "properties": {
                        "start": {
                            "bsonType": "date"
                        },
                        "end": {
                            "bsonType": "date"
                        },
                        "name": {
                            "bsonType": "string",
                            "maxLength": 32,
                            "minLength": 1
                        },
                        "category": {
                            "bsonType": "string",
                            "maxLength": 32,
                            "minLength": 1
                        },
                        "rrule": {
                            "bsonType": ["string", "null"],
                            "maxLength": 256
                        }
                    }
                }
            }
        }
    },
    "events": {
        "bsonType": "object",
        "required": ["userId", "scheduleId", "events"],
        "additionalProperties": false,
        "properties": {
            "_id": {
                "bsonType": "objectId"
            },
            "userId": {
                "bsonType": "objectId"
            },
            "scheduleId": {
                "bsonType": "objectId"
            },
            "events": {
                "bsonType": "array",
                "maxItems": 1073741824,
                "items": {
                    "bsonType": "object",
                    "required": ["start", "end", "name", "personId", "category", "rrule"],
                    "additionalProperties": false,
                    "properties": {
                        "start": {
                            "bsonType": "date"
                        },
                        "end": {
                            "bsonType": "date"
                        },
                        "name": {
                            "bsonType": "string",
                            "maxLength": 32,
                            "minLength": 1
                        },
                        "personId": {
                            "bsonType": "objectId"
                        },
                        "category": {
                            "bsonType": "string",
                            "maxLength": 32,
                            "minLength": 1
                        },
                        "rrule": {
                            "bsonType": ["string", "null"],
                            "maxLength": 256
                        }
                    }
                }
            }
        }
    },
    "stripeCustomers": {
        "bsonType": "object",
        "required": ["userId", "customerId"],
        "additionalProperties": false,
        "properties": {
            "_id": {
                "bsonType": "objectId"
            },
            "userId": {
                "bsonType": "objectId"
            },
            "customerId": {
                "bsonType": "string",
                "maxLength": 18,
                "minLength": 18
            }
        }
    }
}